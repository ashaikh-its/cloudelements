{"id":5880,"name":"prodEvents","description":"Fomula based on event to retrieve tickets updated or created.","userId":154529,"accountId":154251,"createdDate":"2018-04-30T18:10:34Z","steps":[{"id":57785,"onSuccess":[],"onFailure":[],"name":"CreateTicket","type":"elementRequest","properties":{"method":"POST","api":"/hubs/db/${config.destination}","body":"${steps.RetrieveTickets.response.body}","elementInstanceId":"390288"}},{"id":57784,"onSuccess":["RetrieveUpdateTickets"],"onFailure":[],"name":"isUpdateTickets","type":"script","properties":{"body":"// only continue if the event is a created customer\nvar theEvent = trigger.event.eventType;\nvar theObject = trigger.event.objectType;\n\ndone((theEvent === 'UPDATED') && (theObject === 'incidents' || theObject === 'Incidents'));"}},{"id":57783,"onSuccess":["CreateUpdateTicket"],"onFailure":[],"name":"isRetrieveUpdateNull","type":"filter","properties":{"body":"if (steps.RetrieveUpdateTickets.response.body.AtId !== '') {\n  done(true);\n}\ndone(false);"}},{"id":57782,"onSuccess":[],"onFailure":[],"name":"CreateUpdateTicket","type":"elementRequest","properties":{"method":"POST","api":"/hubs/db/${config.destination}","body":"${steps.RetrieveUpdateTickets.response.body}","elementInstanceId":"${config.destinationInstance}"}},{"id":57781,"onSuccess":["dbRetrieveTicket"],"onFailure":[],"name":"RetrieveUpdateTickets","type":"elementRequest","properties":{"path":"${trigger.event}","method":"GET","api":"/hubs/helpdesk/${config.source}/{objectId}","elementInstanceId":"${config.originInstance}"}},{"id":57780,"onSuccess":[],"onFailure":[],"name":"UpdateTickets","type":"elementRequest","properties":{"path":"${trigger.event}","acceptableStatusCodes":"","method":"PATCH","api":"/hubs/db/${config.destination}/{objectId}","body":"${steps.RetrieveUpdateTickets.response.body}","elementInstanceId":"${config.destinationInstance}"}},{"id":57779,"onSuccess":["RetrieveTickets"],"onFailure":["isUpdateTickets"],"name":"isCreateTickets","type":"filter","properties":{"body":"// only continue if the event is a created customer\nvar theEvent = trigger.event.eventType;\nvar theObject = trigger.event.objectType;\n\ndone((theEvent === 'CREATED') && (theObject === 'incidents' || theObject === 'Incidents'));"}},{"id":57778,"onSuccess":["isRetrieveNull"],"onFailure":[],"name":"RetrieveTickets","type":"elementRequest","properties":{"path":"${trigger.event}","method":"GET","api":"/hubs/helpdesk/${config.source}/{objectId}","elementInstanceId":"${config.originInstance}"}},{"id":57777,"onSuccess":["CreateTicket"],"onFailure":[],"name":"isRetrieveNull","type":"filter","properties":{"body":"if (steps.RetrieveTickets.response.body.AtId !== '') {\n  done(true);\n}\ndone(false);"}},{"id":57776,"onSuccess":["isRecordExists"],"onFailure":[],"name":"dbRetrieveTicket","type":"elementRequest","properties":{"path":"${trigger.event}","acceptableStatusCodes":"404","method":"GET","api":"/hubs/db/${config.destination}/{objectId}","body":"${steps.RetrieveUpdateTickets.response.body}","elementInstanceId":"${config.destinationInstance}"}},{"id":57775,"onSuccess":["CreateUpdateTicket"],"onFailure":["UpdateTickets"],"name":"isRecordExists","type":"filter","properties":{"body":"done(steps.dbRetrieveTicket.response.body.providerMessage === 'Record does not exist.');"}}],"triggers":[{"id":5293,"onSuccess":["isCreateTickets"],"onFailure":[],"type":"event","async":true,"name":"trigger","properties":{"elementInstanceId":"${config.originInstance}"}}],"active":true,"debugLoggingEnabled":true,"singleThreaded":false,"configuration":[{"id":16905,"key":"destination","name":"destination","type":"value","required":true},{"id":16906,"key":"destinationInstance","name":"destinationInstance","type":"elementInstance","required":true},{"id":16907,"key":"objectid","name":"objectid","type":"value","required":true},{"id":16908,"key":"originInstance","name":"originInstance","type":"elementInstance","required":true},{"id":16909,"key":"source","name":"source","type":"value","required":true}]}