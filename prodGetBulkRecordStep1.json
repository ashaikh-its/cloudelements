{"id":4574,"name":"prodGetBulkRecordStep1","userId":154529,"accountId":154251,"createdDate":"2017-10-26T16:42:51Z","steps":[{"id":48833,"onSuccess":[],"onFailure":[],"name":"BulkQuery","type":"elementRequest","properties":{"headers":"${steps.buildMetadata.headers}","query":"${steps.buildMetadata.query}","elementInstanceId":"${config.origininstance}","api":"/hubs/helpdesk/bulk/query","method":"POST"}},{"id":48832,"onSuccess":["BulkQuery"],"onFailure":[],"name":"buildMetadata","type":"script","properties":{"body":"const moment = require('moment');\n\nconst formattedDate = moment().subtract(245, 'minutes').format('MM/DD/YY HH:MM:SS');\n\nconst currformattedDate = moment().format('MM/DD/YY');\n\ndone({\n  \"query\":{\n    //\"q\":\"select * from \" + config.sourceobjectname + \" where 'Assigned Group' = \\\"Service Desk\\\" AND 'Last Modified Date' >= \" + \"\\\"\" + formattedDate + \"\\\"\"\n    \"q\":\"select * from \" + config.sourceobjectname +\" where 'Submit Date' >= \\\"01/01/2018\\\" AND 'Last Modified Date' >= \\\"01/01/2018\\\"\"\n  },\n  \"headers\":{\n    \"Elements-Async-Callback-Url\":\"/formulas/instances/\" + config.step2steptwoid + \"/executions\"\n  }\n});"}}],"triggers":[{"id":4383,"onSuccess":["buildMetadata"],"onFailure":[],"type":"scheduled","async":true,"name":"trigger","properties":{"cron":"0 0 5 1/1 * ? *"}}],"active":true,"singleThreaded":false,"debugLoggingEnabled":true,"configuration":[{"id":14333,"key":"origininstance","name":"OriginInstance","type":"elementInstance","required":true},{"id":14334,"key":"sourceobjectname","name":"SourceObjectName","type":"value","required":true},{"id":14335,"key":"step2steptwoid","name":"step2steptwoid","type":"value","required":true}]}